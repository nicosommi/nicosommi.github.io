{"componentChunkName":"component---src-templates-slide-tsx","path":"/2018/03/25/ansible-plus-docker","webpackCompilationHash":"aacbff2b1b6c67b4791c","result":{"data":{"markdownRemark":{"internal":{"content":"\n<!-- class: middle -->\n<!-- layout: true -->\n\n---\n\n<div style=\"display: flex; flex-direction: row;\">\n    <img src=\"/images/assets/docker.png\"></img>\n    <img src=\"/images/assets/ansible.png\"></img>\n</div>\n<br>\n\n# Ansible y docker: primeros pasos\n\n## Por nicosommi\n\n---\n\nname: agenda\n\n## Agenda\n\n- Situación frecuente\n- Repaso de Ansible\n- Llenando los gaps\n- Demo\n- Conclusión\n- Q & A\n\n---\n\n## Situación frecuente\n\n1. Crear imágenes\n2. Subir imágenes al registry\n3. Subir compose al server por SSH\n4. Crear servicio/s con imágen\n5. Deployar stack en el swarm o hacer run/up\n\n???\n\n---\n\n## Problemas\n\n- Naturaleza heterogénea\n- Complejo de utilizar\n- Difícil de mantener\n- Pocas oportunidades de expansión\n\n???\n\n- Nos tenemos que acordar y saber los comandos\n- Dos deploys no son necesariamente iguales\n- Cada tarea demanda mucho esfuerzo\n- Tenemos que documentar el proceso\n- Quizás hay nodos que no corren en docker como RDS\n\n---\n\n## Ansible\n\n- Sencillo de utilizar\n- Reutilizable\n- Ubiquo\n- Auditable\n- Independiente de la plataforma\n- Ecosistema amplio  \n   `http://docs.ansible.com/ansible/latest/list_of_all_modules.html`\n- Abre un mundo de posibilidades  \n   `https://galaxy.ansible.com/`\n\n???\n\n- utiliza ssh\n- esta en todos lados (containers, hosts, dbs/rds, storage, lambda, etc)\n- galaxy con roles y playbook ejemplos\n\n---\n\n## Ansible - Conceptos 1\n\n- Inventarios\n\n```\n[host]\ndocker.host ansible_host=50.15.200.200 ansible_port=22\n[web]\nweb.host ansible_host=50.15.200.200 ansible_port=2222\n[api]\napi.host ansible_host=50.15.200.200 ansible_port=2223\n[load-balancer]\n50.15.200.200 ansible_port=2223\n[app:children]\napi\nweb\n```\n\n---\n\n## Ansible - Conceptos 2\n\n- Modulos\n\n```\n> ansible -i hosts -m copy \\\n    -a 'src=index.html dest=/app/index.html' docker.host\n> ansible -i hosts -m shell \\\n    -a 'grep DISTRIB_RELEASE /etc/lsb-release' all\n```\n\n---\n\n## Ansible - Conceptos 3\n\n- Grupos y variables\n\n```\ngroup_vars/app\ngroup_vars/api\nhost_vars/api.host\n```\n\n---\n\n## Ansible - Conceptos 4\n\n- Playbooks, tasks y handlers\n\n```yaml\n- name: test playbook\n  hosts: docker.host\n  tasks:\n    - name: Installs nginx\n      apt: pkg=nginx state=installed update_cache=true\n    - name: Copy nginx configuration\n      template:\n        src: ansible/nginx.conf.j2\n        dest: /etc/nginx/nginx.conf\n      notify: \"restart nginx\"\n  handlers:\n    - name: Restart nginx server\n      service: name=nginx state=restarted\n      listen: \"restart nginx\"\n```\n\n---\n\n## Ansible - Conceptos 5\n\n- Roles\n- Vault\n- Patterns, Conditions, Loops\n- Etc\n\n???\n\n- utiliza ssh\n- galaxy con roles y playbook ejemplos\n\n---\n\n## Llenando los gaps\n\n- Creando el playbook para provision\n- Creando el playbook para deploy\n- Creando el playbook X\n\n---\n\n## Ejemplo\n\n---\n\n# Q & A\n\n---\n\n## Para llevar\n\n- Tutorial de ansible  \n   `https://github.com/turkenh/ansible-interactive-tutorial`\n- Desafíos y otros casos de uso - Continuous Delivery\n  - Orchestration\n  - Rotación de secretos\n  - ...cualquier serie de comandos automatizables...\n\n---\n\n# Gracias!\n"},"frontmatter":{"date":"March 25, 2018","url":"/2018/03/25/ansible-plus-docker","title":"ansible plus docker","author":"nico","categories":null,"tags":null,"type":"remark-slide"}}},"pageContext":{"isCreatedByStatefulCreatePages":false}}}